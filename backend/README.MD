# ANJAVA REST API EXPRESS SERVER

<h2 style="color:#39c5bb">ToDo List</h2>

## USER

- [x] 새로운 계정 생성
- [x] 계정 유효성 점검
  - [x] 비밀번호 최소 자리수 점검
  - [x] 계정 ID, 학생 번호, 이메일 중복 점검
  - [x] 이메일 유효성 점검
- [x] 계정 로그인
- [x] 관리자 계정 구현
  - [x] 관리자자면 post body, 일반 유저면 jwt 데이터 사용
- [x] 비밀번호 암호화
- [x] 예약 데이터를 전부 받아 올 수 있게하기.
- [ ] 유저 삭제시 관련 예약도 삭제하기

## ROOM

- [x] 새로운 방 만들기
  - [x] 중복 방 검사
- [x] 모든 방에 대한 정보 얻기
- [x] 유저 한명이 특정 방의 좌석에 대해 예약
  - [x] 한명이 중복 신청 불가능하게 하기
  - [x] 유저 콜렉션에도 예약 정보가 들어가게
- [x] 예약 취소 기능 구현
  - [x] 유저 콜렉션에서도 취소 되게
- [x] 특정 방에대한 예약 데이터 받기
  - [x] 예약 데이터 가공해서 클라이언트에게 보내주기
- [x] getRoom return 값 조정
  - [x] 남아 있는 좌석 수
- [x] 리셋 시간이 현재 시간보다 이전이면 등록 못하게 막기
- [ ] 만약 방은 예약 성공했는데 user 정보 업데이트 실패한다면??
- [x] 좌석 최대 수 보다 큰 좌석에 대한 예약 처리
- [x] row, column 보다 큰 blankLine 처리
- [x] 존재하지 않는 방에 접근시 에러 처리
- [x] 취소할때 좌석, 유저 ID 하나만 보내도 되게 하기.

---

- [ ] 랜덤 좌석 배치 기능
- [x] 현재 유저가 예약 중인 방인지 리턴
- [x] 예약을 취소할때 본인 or Admin일떄 통과하는 미들웨어

### 리셋 기능 로직

- [ ] 리셋 기능
  - [x] 리셋 등록 기능
    - [x] 방 번호 옳바른지 검사
  - [x] 주기적 리셋 기능
  - [ ] 방에 주기적 리셋 기간 프로퍼티 추가 후 리셋 타이머 구현
  - [x] 새로운 리셋이 업데이트되면 기존 타이머 취소 후 새로운 리셋 등록
  - [x] 서버가 꺼져있던 사이에 이미 지니간 리셋이 있다면 바로 리셋 실행
  - [x] 더 이상 리셋할 방이 타이머 멈추기
  - [ ] 주기적 리셋 -> room model에 어떤 식으로 등록?
    - [ ] 특정요일을 몇 주 마다,　옵션으로 완전 초기화, 랜덤, 앞으로 전진
    - [ ] { day:0, opt: 0- 1 -2 }
  - [x] 리셋 요청 기능
  - [ ] time 관련 dayjs로 업그레이드하기

## General

- [x] 유저 인증 JWT 방식으로 구현
- [x] restful하게 리팩토링
- [x] http status 지정

## Refactoring

- [ ] consol.log -> debug
- [x] router method 하나로 묶어주기

## DEPLOY

- [x] Nas의 Docker에 올리기
- [x] heroko에 express 서버 올리기
- [x] 몽고 DB 클라우드에 올리기

## WEB - 관리자 페이지 만들기

## CI
